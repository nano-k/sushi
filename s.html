<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>検閲世界</title>

<style>
  body {
    margin: 0;
    background: #fff;
    font-family: "Yu Mincho", "Hiragino Mincho ProN", serif;
  }

  header {
    text-align: center;
    font-size: 40px;
    margin-top: 100px;
    color: #000;
    letter-spacing: 2px;
    opacity: 0;
    transition: opacity 0.6s ease-out;
  }

  /* 「検」だけラップする */
  .kanji-box {
    position: relative;
    display: inline-block;
  }

  /* 検の文字そのもの（最初は非表示） */
  .kanji-box span {
    position: relative;
    z-index: 10;
    opacity: 0; /* ← モザイク中は検を完全に消す */
    transition: opacity 0.2s;
  }

  /* モザイク生成用 */
  .mosaic-container {
    position: absolute;
    inset: 0;
    z-index: 20;
    pointer-events: none;
    display: grid;
  }

  .tile {
    background: #000;
    opacity: 0;
    animation: tileFade 0.45s forwards;
  }

  @keyframes tileFade {
    0%   { opacity: 0; }
    15%  { opacity: 0.9; }
    100% { opacity: 0; }
  }

  /* 本編のフェードイン */
  .container {
    margin-top: 120px;
    width: 90%;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    font-size: 18px;
    line-height: 1.8;
    color: #222;
    opacity: 0;
    transition: opacity 0.6s ease-out;
  }

  .next-btn-wrap {
    margin-top: 40px;
    text-align: center;
  }

  .next-btn {
    display: inline-block;
    padding: 10px 20px;
    border: 2px solid #000;
    text-decoration: none;
    color: #000;
    font-size: 18px;
    border-radius: 4px;
  }

  footer {
    text-align: center;
    margin-top: 60px;
    padding-bottom: 40px;
    color: #444;
  }

</style>
</head>
<body>

<!-- タイトル -->
<header id="titleHeader">
  <span class="kanji-box" id="kanjiBox"><span>検</span></span>閲世界
</header>

<!-- 本編 -->
<div class="container" id="mainContent">
  <h2>イントロダクション</h2>
  <p>
    あなたが目を覚ましたのは、文字だらけの奇妙な世界。<br>
    文字にはどこか違和感があることにあなたは気付く。<br><br>
    あなたに与えられた能力は文字を修正する力。<br>
    文字を正しく修正して謎を解き、この歪んだ世界から帰還せよ。
  </p>

  <div class="next-btn-wrap">
    <a class="next-btn" href="world.html">進む</a>
  </div>

  <footer>
    Page 1
  </footer>
</div>

<script>
window.addEventListener("load", () => {
  const header = document.getElementById("titleHeader");
  const main = document.getElementById("mainContent");

  // タイトルフェードイン
  setTimeout(() => {
    header.style.opacity = "1";
  }, 200);

  // 「検」モザイク開始
  setTimeout(() => {
    startMosaic();
  }, 280);

  // 本文フェードイン
  setTimeout(() => {
    main.style.opacity = "1";
  }, 950);
});


/* ===========================
    ランダムタイルモザイク
   =========================== */
function startMosaic() {
  const box = document.getElementById("kanjiBox");

  // タイルの粒度（粗い→5、細かい→10）
  const grid = 7;

  const container = document.createElement("div");
  container.className = "mosaic-container";

  container.style.gridTemplateColumns = `repeat(${grid}, 1fr)`;
  container.style.gridTemplateRows = `repeat(${grid}, 1fr)`;

  // タイル生成
  for (let i = 0; i < grid * grid; i++) {
    const tile = document.createElement("div");
    tile.className = "tile";

    // ランダムなディレイでちらばらせる
    tile.style.animationDelay = `${Math.random() * 200}ms`;

    container.appendChild(tile);
  }

  box.appendChild(container);

  // モザイク終了 → 検の文字を表示
  setTimeout(() => {
    container.remove();
    box.querySelector("span").style.opacity = "1";
  }, 700);
}
</script>

</body>
</html>
