<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>検閲世界</title>

<style>
/* ---- 基本 ---- */
body {
  margin: 0;
  padding: 0;
  background: #fff;
  font-family: "Yu Mincho", "Hiragino Mincho ProN", serif;
  overflow: hidden;
}

/* ---- 中央のタイトル演出 ---- */
#censorTitleWrapper {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #fff;
  z-index: 999;
  transition: opacity 0.35s ease; /* タイトル消失 */
}

#censorTitle {
  font-size: 48px;
  letter-spacing: 0.15em;
  display: flex;
  gap: 0.1em;
  color: #000;
}

#charKen {
  position: relative;
  display: inline-block;
  width: 1em;
  height: 1em;
}

/* ---- モザイクタイル ---- */
.mosaic-tile {
  position: absolute;
  width: 12px;
  height: 12px;
  background: #000;
  opacity: 1;
  animation: tileFade 0.28s forwards;
}

@keyframes tileFade {
  to {
    opacity: 0;
    transform: scale(0.7);
  }
}

/* ---- 本文（headerも同時にフェード） ---- */
.fade-target {
  opacity: 0;
  transition: opacity 1.2s ease; /* ← 同時に浮かび上がる */
}

.show-content {
  opacity: 1;
}

header {
  text-align: center;
  padding: 20px 0;
  font-size: 28px;
}

main {
  max-width: 720px;
  margin: 0 auto;
  padding: 20px;
}

.next-btn-wrap {
  margin-top: 30px;
  text-align: center;
}

.next-btn {
  display: inline-block;
  text-decoration: none;
  padding: 10px 20px;
  border: 1px solid #000;
  color: #000;
}

footer {
  text-align: center;
  padding: 20px;
}
</style>
</head>

<body>

<!-- ======= 検の文字モザイク演出 ======= -->
<div id="censorTitleWrapper">
  <div id="censorTitle">
    <span id="charKen">検</span>
    <span>閲世界</span>
  </div>
</div>

<!-- ======= 本文（header + container 同時フェード） ======= -->
<header class="fade-target">検閲世界</header>

<div class="container fade-target">
<main>
  <section class="page" data-page="1">
    <h2 class="section-title">イントロダクション</h2>
    <p>
      あなたが目を覚ましたのは、文字だらけの奇妙な世界。<br>
      文字にはどこか違和感があることにあなたは気付く。<br><br>
      あなたに与えられた能力は文字を修正する力。<br>
      文字を正しく修正して謎を解き、この歪んだ世界から帰還せよ。
    </p>

    <div class="next-btn-wrap">
      <a class="next-btn" href="world.html">進む</a>
    </div>
  </section>
</main>

<footer>
  Page <span id="pageNum">1</span>
</footer>
</div>


<script>
// =======================================
// 検 の文字にランダムモザイク
// =======================================
function createMosaic() {
  const ken = document.getElementById("charKen");
  const rect = ken.getBoundingClientRect();
  
  const tileSize = 14;
  const cols = Math.ceil(rect.width / tileSize);
  const rows = Math.ceil(rect.height / tileSize);

  const offsetY = 4; // モザイクを少し下に

  for (let y = 0; y < rows; y++) {
    for (let x = 0; x < cols; x++) {
      const tile = document.createElement("div");
      tile.classList.add("mosaic-tile");

      tile.style.left = `${x * tileSize}px`;
      tile.style.top = `${y * tileSize + offsetY}px`;

      tile.style.animationDelay = `${Math.random() * 0.28}s`;

      ken.appendChild(tile);
    }
  }
}

createMosaic();


// =======================================
// タイトル消失 → 真っ白 → 本文ゆっくり表示
// =======================================
setTimeout(() => {

  // 1. タイトルを消す
  document.getElementById("censorTitleWrapper").style.opacity = 0;

  // 2. 真っ白の状態を 400ms 維持
  setTimeout(() => {

    // 3. header + 本文を同時にフェードイン
    document.querySelectorAll(".fade-target").forEach(el => {
      el.classList.add("show-content");
    });

    document.body.style.overflow = "auto";

  }, 400); // 真っ白時間

}, 650); // モザイク終了待ち
</script>

</body>
</html>
