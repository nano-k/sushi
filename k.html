<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>検閲世界</title>
<style>
  body {
    margin: 0;
    background: #fff;
    font-family: "Noto Serif JP", serif;
    overflow: hidden;
  }

  /* 黒白ノイズ（砂嵐） */
  #noise {
    position: fixed;
    inset: 0;
    background: repeating-radial-gradient(#000 0 1px, #fff 1px 2px);
    opacity: 0;
    pointer-events: none;
    z-index: 2000;
  }

  /* モザイクタイル */
  #mosaicContainer {
    position: fixed;
    top: 55%; /* → やや下に調整 */
    left: 50%;
    transform: translate(-50%, -50%);
    width: 180px;
    height: 80px;
    display: flex;
    flex-wrap: wrap;
    opacity: 1;
    z-index: 1500;
  }
  .tile {
    width: 20px;
    height: 20px;
    background: #333;
    opacity: 0;
  }

  /* 検閲世界（最初に出るタイトル） */
  #titleCensored {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 48px;
    letter-spacing: 8px;
    opacity: 1;
    z-index: 1200;
    transition: opacity 0.3s;
  }

  /* ヘッダー & 本文（最初は透明） */
  header, main {
    opacity: 0;
    transition: opacity 2.0s ease;
    z-index: 10;
    position: relative;
  }

  header {
    font-size: 40px;
    text-align: center;
    margin-top: 40px;
  }

  main {
    margin: 60px auto;
    max-width: 700px;
    font-size: 20px;
    line-height: 1.8;
  }
</style>
</head>
<body>

<div id="noise"></div>

<div id="mosaicContainer"></div>

<div id="titleCensored">
  <span id="ken">検</span>閲世界
</div>

<header>検閲世界</header>

<main>
  これは本文です。<br>
  ここに本編を入れてください。<br>
  フェードインでゆっくり浮かび上がります。
</main>

<script>
/* ---- モザイク生成 ---- */
const mosaic = document.getElementById("mosaicContainer");
for (let i = 0; i < 40; i++) {
  const t = document.createElement("div");
  t.classList.add("tile");
  mosaic.appendChild(t);
}

function playMosaic() {
  const tiles = document.querySelectorAll(".tile");

  // 「検」だけ出遅れ演出
  setTimeout(() => {
    tiles.forEach((tile, i) => {
      setTimeout(() => {
        tile.style.opacity = 1;
      }, Math.random() * 300);
    });
  }, 200);

  // モザイクが消える瞬間まで「検」を消す
  const ken = document.getElementById("ken");
  ken.style.opacity = 0;

  // モザイク消滅
  setTimeout(() => {
    tiles.forEach((tile) => (tile.style.opacity = 0));
    ken.style.opacity = 1; // モザイクが終わった瞬間に出現
  }, 1000);
}

/* ---- 砂嵐（黒白ノイズ） ---- */
function playNoise() {
  const noise = document.getElementById("noise");
  noise.style.opacity = 1;
  setTimeout(() => {
    noise.style.opacity = 0;
  }, 300);
}

/* ---- メインタイトル消去 → 白転 → 本文表示 ---- */
function playFinalFade() {
  const title = document.getElementById("titleCensored");

  // タイトルをすぐ消す（速め）
  title.style.opacity = 0;

  // 白転 → 本文フェードイン
  setTimeout(() => {
    document.querySelector("header").style.opacity = 1;
    document.querySelector("main").style.opacity = 1;
  }, 400);
}

/* ---- 全体進行 ---- */
setTimeout(() => {
  playMosaic();
}, 100);

setTimeout(() => {
  playNoise();
}, 1200);

setTimeout(() => {
  playFinalFade();
}, 1500);
</script>

</body>
</html>
